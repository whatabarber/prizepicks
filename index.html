<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PrizePicks AI Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e1e2e 0%, #2d2d42 100%);
            color: #ffffff;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .header h1 {
            font-size: 3em;
            font-weight: 700;
            background: linear-gradient(45deg, #ff6b00, #ffd700, #00ff88);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2em;
            color: #aaa;
            margin-bottom: 20px;
        }

        .main-tabs {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .main-tab {
            padding: 15px 30px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 25px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 1.1em;
            backdrop-filter: blur(10px);
        }

        .main-tab:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .main-tab.active {
            background: linear-gradient(45deg, #ff6b00, #ffd700);
            border-color: transparent;
            box-shadow: 0 5px 15px rgba(255, 107, 0, 0.4);
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .stat-value {
            font-size: 2.5em;
            font-weight: bold;
            color: #00ff88;
        }

        .stat-label {
            color: #ccc;
            margin-top: 5px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .filters {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .filter-btn {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 0.9em;
            backdrop-filter: blur(10px);
        }

        .filter-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .filter-btn.active {
            background: linear-gradient(45deg, #ff6b00, #ffd700);
            border-color: transparent;
            box-shadow: 0 5px 15px rgba(255, 107, 0, 0.4);
        }

        .picks-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .pick-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .pick-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #ff6b00, #ffd700, #00ff88);
        }

        .pick-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
            background: rgba(255, 255, 255, 0.15);
        }

        .player-name {
            font-size: 1.4em;
            font-weight: bold;
            color: #ffffff;
            margin-bottom: 8px;
        }

        .pick-details {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .stat-info {
            flex: 1;
        }

        .stat-type {
            color: #ffd700;
            font-weight: 600;
            font-size: 1.1em;
        }

        .line-score {
            color: #00ff88;
            font-size: 1.3em;
            font-weight: bold;
        }

        .confidence {
            background: linear-gradient(45deg, #ff6b00, #ffd700);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .pick-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }

        .league-tag {
            background: rgba(0, 255, 136, 0.2);
            color: #00ff88;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: 600;
        }

        .bovada-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 20px;
        }

        .bovada-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #007bff, #0056b3);
        }

        .matchup {
            font-size: 1.3em;
            font-weight: bold;
            color: #ffffff;
            margin-bottom: 15px;
        }

        .bet-recommendation {
            background: rgba(0, 123, 255, 0.2);
            color: #4da6ff;
            padding: 10px;
            border-radius: 10px;
            margin: 10px 0;
        }

        .loading {
            text-align: center;
            padding: 50px;
            font-size: 1.2em;
            color: #aaa;
        }

        .error {
            text-align: center;
            padding: 50px;
            color: #ff6b6b;
            background: rgba(255, 107, 107, 0.1);
            border-radius: 15px;
            border: 1px solid rgba(255, 107, 107, 0.3);
        }

        .refresh-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(45deg, #ff6b00, #ffd700);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 1.5em;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(255, 107, 0, 0.4);
        }

        .refresh-btn:hover {
            transform: scale(1.1) rotate(180deg);
            box-shadow: 0 8px 25px rgba(255, 107, 0, 0.6);
        }

        .no-picks {
            text-align: center;
            padding: 50px;
            color: #aaa;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .picks-grid {
                grid-template-columns: 1fr;
            }
            
            .filters, .main-tabs {
                flex-direction: column;
                align-items: center;
            }
            
            .filter-btn, .main-tab {
                width: 200px;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>PrizePicks AI Dashboard</h1>
            <p>Real-time sports betting intelligence powered by AI analysis</p>
            <div id="lastUpdate" class="last-update"></div>
        </div>

        <!-- Main Navigation Tabs -->
        <div class="main-tabs">
            <button class="main-tab active" onclick="switchMainTab('prizepicks')">PrizePicks Props</button>
            <button class="main-tab" onclick="switchMainTab('bovada')">Bovada Games</button>
        </div>

        <!-- Stats Section -->
        <div class="stats" id="statsContainer">
            <div class="stat-card">
                <div class="stat-value" id="totalPicks">0</div>
                <div class="stat-label">Total Picks</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="nflPicks">0</div>
                <div class="stat-label">NFL</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="cfbPicks">0</div>
                <div class="stat-label">CFB</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="avgConfidence">8.0</div>
                <div class="stat-label">Avg Confidence</div>
            </div>
        </div>

        <!-- PrizePicks Tab Content -->
        <div id="prizepicks-content" class="tab-content active">
            <div class="filters">
                <button class="filter-btn active" onclick="filterPrizePicks('all')">All Props</button>
                <button class="filter-btn" onclick="filterPrizePicks('nfl')">NFL</button>
                <button class="filter-btn" onclick="filterPrizePicks('cfb')">CFB</button>
                <button class="filter-btn" onclick="filterPrizePicks('high-confidence')">High Confidence (7+)</button>
                <button class="filter-btn" onclick="filterPrizePicks('passing-yards')">Passing Yards</button>
                <button class="filter-btn" onclick="filterPrizePicks('rushing-yards')">Rushing Yards</button>
                <button class="filter-btn" onclick="filterPrizePicks('receiving-yards')">Receiving Yards</button>
                <button class="filter-btn" onclick="filterPrizePicks('receptions')">Receptions</button>
                <button class="filter-btn" onclick="filterPrizePicks('touchdowns')">Touchdowns</button>
                <button class="filter-btn" onclick="filterPrizePicks('completions')">Completions</button>
                <button class="filter-btn" onclick="filterPrizePicks('attempts')">Attempts</button>
            </div>

            <div id="prizePicksContainer">
                <div class="loading">Loading PrizePicks data...</div>
            </div>
        </div>

        <!-- Bovada Tab Content -->
        <div id="bovada-content" class="tab-content">
            <div class="filters">
                <button class="filter-btn active" onclick="filterBovada('all')">All Games</button>
                <button class="filter-btn" onclick="filterBovada('nfl')">NFL</button>
                <button class="filter-btn" onclick="filterBovada('cfb')">CFB</button>
                <button class="filter-btn" onclick="filterBovada('high-confidence')">High Confidence (7+)</button>
                <button class="filter-btn" onclick="filterBovada('moneyline')">Moneyline</button>
                <button class="filter-btn" onclick="filterBovada('spread')">Spread</button>
                <button class="filter-btn" onclick="filterBovada('totals')">Over/Under</button>
            </div>

            <div id="bovadaContainer">
                <div class="loading">Loading Bovada data...</div>
            </div>
        </div>
    </div>

    <button class="refresh-btn" onclick="refreshData()" title="Refresh Data">
        🔄
    </button>

    <script>
        let allPrizePicks = [];
        let allBovadaPicks = [];
        let currentMainTab = 'prizepicks';
        let currentPrizePicksFilter = 'all';
        let currentBovadaFilter = 'all';

        async function loadData() {
            await Promise.all([loadPrizePicks(), loadBovada()]);
            updateStats();
            updateLastUpdateTime();
        }

        async function loadPrizePicks() {
    try {
        console.log('Loading PrizePicks data...');
        
        // Try multiple file paths - the exact files your Python script creates
        const possiblePaths = [
            './prizepicks_analysis.json',      // Root directory (after GitHub deploy)
            './data/prizepicks_analysis.json', // Data directory  
            'prizepicks_analysis.json',        // Relative path
            './prizepicks_current.json',       // Alternative current file
            './data/prizepicks_current.json'   // Alternative in data folder
        ];
        
        let data = null;
        let loadedFrom = '';
        
        for (const path of possiblePaths) {
            try {
                console.log(`Trying to load from: ${path}`);
                const response = await fetch(path);
                
                if (response.ok) {
                    data = await response.json();
                    loadedFrom = path;
                    console.log(`Successfully loaded from: ${path}`);
                    break;
                }
            } catch (error) {
                console.log(`Failed to load from ${path}: ${error.message}`);
                continue;
            }
        }
        
        if (!data) {
            throw new Error('Could not load PrizePicks data from any path');
        }
        
        console.log(`Loaded PrizePicks from ${loadedFrom}:`, data.length, 'picks');
        
        allPrizePicks = Array.isArray(data) ? data : [];
        displayPrizePicks(allPrizePicks);
        
    } catch (error) {
        console.error('Error loading PrizePicks:', error);
        document.getElementById('prizePicksContainer').innerHTML = `
            <div class="error">
                <h3>Failed to load PrizePicks data</h3>
                <p>Error: ${error.message}</p>
                <p><strong>Files to check:</strong></p>
                <ul style="text-align: left; max-width: 400px; margin: 0 auto;">
                    <li>prizepicks_analysis.json</li>
                    <li>data/prizepicks_analysis.json</li>
                    <li>prizepicks_current.json</li>
                </ul>
                <p>Run 'python update_all.py' to generate these files.</p>
            </div>
        `;
    }
}

async function loadBovada() {
    try {
        console.log('Loading Bovada data...');
        
        // Try multiple file paths for Bovada data
        const possiblePaths = [
            './bovada_analysis.json',          // Root directory (after GitHub deploy)
            './data/bovada_analysis.json',     // Data directory
            'bovada_analysis.json',            // Relative path
            './bovada_current.json',           // Alternative current file
            './data/bovada_current.json'       // Alternative in data folder
        ];
        
        let data = null;
        let loadedFrom = '';
        
        for (const path of possiblePaths) {
            try {
                console.log(`Trying to load Bovada from: ${path}`);
                const response = await fetch(path);
                
                if (response.ok) {
                    data = await response.json();
                    loadedFrom = path;
                    console.log(`Successfully loaded Bovada from: ${path}`);
                    break;
                }
            } catch (error) {
                console.log(`Failed to load Bovada from ${path}: ${error.message}`);
                continue;
            }
        }
        
        if (!data) {
            // If no Bovada data found, show empty state instead of error
            console.log('No Bovada data found - showing empty state');
            allBovadaPicks = [];
            displayBovada(allBovadaPicks);
            return;
        }
        
        console.log(`Loaded Bovada from ${loadedFrom}:`, data.length, 'picks');
        
        allBovadaPicks = Array.isArray(data) ? data : [];
        displayBovada(allBovadaPicks);
        
    } catch (error) {
        console.error('Error loading Bovada:', error);
        document.getElementById('bovadaContainer').innerHTML = `
            <div class="error">
                <h3>No Bovada data available</h3>
                <p>This usually means no live games were found or no high-value bets detected.</p>
                <p>Bovada data will appear here when:</p>
                <ul style="text-align: left; max-width: 400px; margin: 0 auto;">
                    <li>NFL/CFB games are live</li>
                    <li>High-confidence bets are detected</li>
                    <li>Bovada API is accessible</li>
                </ul>
            </div>
        `;
    }
}

        function switchMainTab(tab) {
            currentMainTab = tab;
            
            // Update tab buttons
            document.querySelectorAll('.main-tab').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Show/hide content
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.getElementById(`${tab}-content`).classList.add('active');
            
            // Update stats based on current tab
            updateStats();
        }

        function updateStats() {
            let totalPicks, nflPicks, cfbPicks, avgConf;
            
            if (currentMainTab === 'prizepicks') {
                totalPicks = allPrizePicks.length;
                nflPicks = allPrizePicks.filter(pick => 
                    pick.sport === 'NFL' || 
                    (pick.league && pick.league.toUpperCase().includes('NFL'))
                ).length;
                cfbPicks = allPrizePicks.filter(pick => 
                    pick.sport === 'CFB' || 
                    (pick.league && (pick.league.toUpperCase().includes('NCAAF') || pick.league.toUpperCase().includes('CFB')))
                ).length;
                avgConf = allPrizePicks.length > 0 ? 
                    (allPrizePicks.reduce((sum, pick) => sum + (pick.confidence_score || 5), 0) / allPrizePicks.length).toFixed(1) : 
                    0;
            } else {
                totalPicks = allBovadaPicks.length;
                nflPicks = allBovadaPicks.filter(pick => pick.sport === 'NFL').length;
                cfbPicks = allBovadaPicks.filter(pick => pick.sport === 'CFB').length;
                avgConf = allBovadaPicks.length > 0 ? 
                    (allBovadaPicks.reduce((sum, pick) => sum + (pick.confidence_score || 5), 0) / allBovadaPicks.length).toFixed(1) : 
                    0;
            }

            document.getElementById('totalPicks').textContent = totalPicks;
            document.getElementById('nflPicks').textContent = nflPicks;
            document.getElementById('cfbPicks').textContent = cfbPicks;
            document.getElementById('avgConfidence').textContent = avgConf;
        }

        function displayPrizePicks(picks) {
            const container = document.getElementById('prizePicksContainer');
            
            if (picks.length === 0) {
                container.innerHTML = `
                    <div class="no-picks">
                        <h3>No PrizePicks found for the selected filter</h3>
                        <p>Try selecting a different category or refresh the data</p>
                    </div>
                `;
                return;
            }

            const sortedPicks = picks.sort((a, b) => (b.confidence_score || 5) - (a.confidence_score || 5));
            const html = sortedPicks.map(pick => createPrizePickCard(pick)).join('');
            container.innerHTML = `<div class="picks-grid">${html}</div>`;
        }

        function displayBovada(picks) {
            const container = document.getElementById('bovadaContainer');
            
            if (picks.length === 0) {
                container.innerHTML = `
                    <div class="no-picks">
                        <h3>No Bovada games found</h3>
                        <p>No live games or high-value bets detected</p>
                    </div>
                `;
                return;
            }

            const sortedPicks = picks.sort((a, b) => (b.confidence_score || 5) - (a.confidence_score || 5));
            const html = sortedPicks.map(pick => createBovadaCard(pick)).join('');
            container.innerHTML = html;
        }

        function createPrizePickCard(pick) {
            const sport = pick.sport || 'Unknown';
            const confidence = pick.confidence_score || 5;
            const player = pick.player_name || 'Unknown Player';
            const statType = pick.stat_type || 'Unknown Stat';
            const lineScore = pick.line_score || 0;
            const reasoning = pick.reasoning || '';
            
            const recommendation = pick.recommendation || '';
            const isOver = recommendation.toLowerCase().includes('over') || recommendation.toLowerCase().includes('more');
            const isUnder = recommendation.toLowerCase().includes('under') || recommendation.toLowerCase().includes('less');
            const direction = isOver ? 'Over' : isUnder ? 'Under' : '';
            
            return `
                <div class="pick-card" data-sport="${sport.toLowerCase()}">
                    <div class="player-name">${player}</div>
                    
                    <div class="pick-details">
                        <div class="stat-info">
                            <div class="stat-type">${statType}</div>
                            <div class="line-score">${direction} ${lineScore}</div>
                        </div>
                        <div class="confidence">${confidence.toFixed(1)}/10</div>
                    </div>

                    <div class="pick-meta">
                        <div class="league-tag">${sport}</div>
                    </div>

                    ${reasoning ? `
                        <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.2); font-size: 0.9em; color: #ccc;">
                            ${reasoning}
                        </div>
                    ` : ''}
                </div>
            `;
        }

        function createBovadaCard(pick) {
            const confidence = pick.confidence_score || 5;
            const recommendations = pick.recommendations || [];
            
            return `
                <div class="bovada-card">
                    <div class="matchup">${pick.matchup}</div>
                    
                    ${recommendations.map(rec => `
                        <div class="bet-recommendation">
                            <strong>${rec.bet_type}:</strong> ${rec.recommendation} (${rec.odds})
                            <div style="margin-top: 5px; font-size: 0.9em;">
                                Confidence: ${rec.confidence.toFixed(1)}/10 | Edge: ${rec.value_edge}
                            </div>
                            <div style="margin-top: 5px; font-size: 0.85em; color: #ccc;">
                                ${rec.reasoning}
                            </div>
                        </div>
                    `).join('')}
                    
                    <div class="pick-meta">
                        <div class="league-tag">${pick.sport}</div>
                        <div class="confidence">${confidence.toFixed(1)}/10</div>
                    </div>
                </div>
            `;
        }

        function filterPrizePicks(filter) {
            currentPrizePicksFilter = filter;
            
            document.querySelectorAll('#prizepicks-content .filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            let filteredPicks = [...allPrizePicks];

            switch(filter) {
                case 'nfl':
                    filteredPicks = allPrizePicks.filter(pick => 
                        pick.sport === 'NFL' || (pick.league && pick.league.toUpperCase().includes('NFL'))
                    );
                    break;
                case 'cfb':
                    filteredPicks = allPrizePicks.filter(pick => 
                        pick.sport === 'CFB' || (pick.league && (pick.league.toUpperCase().includes('NCAAF') || pick.league.toUpperCase().includes('CFB')))
                    );
                    break;
                case 'high-confidence':
                    filteredPicks = allPrizePicks.filter(pick => (pick.confidence_score || 5) >= 7);
                    break;
                case 'passing-yards':
                    filteredPicks = allPrizePicks.filter(pick => 
                        pick.stat_type?.toLowerCase().includes('pass') && pick.stat_type?.toLowerCase().includes('yard')
                    );
                    break;
                case 'rushing-yards':
                    filteredPicks = allPrizePicks.filter(pick => 
                        pick.stat_type?.toLowerCase().includes('rush') && pick.stat_type?.toLowerCase().includes('yard')
                    );
                    break;
                case 'receiving-yards':
                    filteredPicks = allPrizePicks.filter(pick => 
                        pick.stat_type?.toLowerCase().includes('receiv') && pick.stat_type?.toLowerCase().includes('yard')
                    );
                    break;
                case 'receptions':
                    filteredPicks = allPrizePicks.filter(pick => 
                        pick.stat_type?.toLowerCase().includes('reception') || pick.stat_type?.toLowerCase().includes('catch')
                    );
                    break;
                case 'touchdowns':
                    filteredPicks = allPrizePicks.filter(pick => 
                        pick.stat_type?.toLowerCase().includes('touchdown') || pick.stat_type?.toLowerCase().includes('td')
                    );
                    break;
                case 'completions':
                    filteredPicks = allPrizePicks.filter(pick => 
                        pick.stat_type?.toLowerCase().includes('completion') || pick.stat_type?.toLowerCase().includes('complete')
                    );
                    break;
                case 'attempts':
                    filteredPicks = allPrizePicks.filter(pick => 
                        pick.stat_type?.toLowerCase().includes('attempt')
                    );
                    break;
                default:
                    filteredPicks = allPrizePicks;
            }

            displayPrizePicks(filteredPicks);
        }

        function filterBovada(filter) {
            currentBovadaFilter = filter;
            
            document.querySelectorAll('#bovada-content .filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            let filteredPicks = [...allBovadaPicks];

            switch(filter) {
                case 'nfl':
                    filteredPicks = allBovadaPicks.filter(pick => pick.sport === 'NFL');
                    break;
                case 'cfb':
                    filteredPicks = allBovadaPicks.filter(pick => pick.sport === 'CFB');
                    break;
                case 'high-confidence':
                    filteredPicks = allBovadaPicks.filter(pick => (pick.confidence_score || 5) >= 7);
                    break;
                case 'moneyline':
                    filteredPicks = allBovadaPicks.filter(pick => 
                        pick.recommendations?.some(rec => rec.bet_type === 'Moneyline')
                    );
                    break;
                case 'spread':
                    filteredPicks = allBovadaPicks.filter(pick => 
                        pick.recommendations?.some(rec => rec.bet_type === 'Spread')
                    );
                    break;
                case 'totals':
                    filteredPicks = allBovadaPicks.filter(pick => 
                        pick.recommendations?.some(rec => rec.bet_type === 'Total')
                    );
                    break;
                default:
                    filteredPicks = allBovadaPicks;
            }

            displayBovada(filteredPicks);
        }

        function refreshData() {
            document.getElementById('prizePicksContainer').innerHTML = '<div class="loading">Refreshing PrizePicks data...</div>';
            document.getElementById('bovadaContainer').innerHTML = '<div class="loading">Refreshing Bovada data...</div>';
            loadData();
        }

        function updateLastUpdateTime() {
            const now = new Date();
            document.getElementById('lastUpdate').innerHTML = `
                <small style="color: #aaa;">Last updated: ${now.toLocaleString()}</small>
            `;
        }

        // Auto refresh every 5 minutes
        setInterval(refreshData, 300000);

        // Load data when page loads
        document.addEventListener('DOMContentLoaded', loadData);
    </script>
</body>
</html>